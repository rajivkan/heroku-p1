<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
</head>
<body>
<div>
	<table>
		<tr>
			<td colspan="2">
				SignUp
			</td>
		</tr>
		<tr>
			<td>
				Email
			</td>
			<td>
				<input type="text" id="email">
			</td>
		</tr>
		<tr>
			<td>
				Password
			</td>
			<td>
				<input type="text" id="password">
			</td>
		</tr>
		<tr>
			<td>
				<button onclick="onSignUp()">Sign Up</button>
			</td>
			<td>
				<button onclick="onLogin()">Login</button>
			</td>
		</tr>
	</table>
</div>


<div>
	<label>
		Enter Token
		<input type="text" id="token">
	</label>
	<button onclick="btnClick()">Call Dashboard</button>
</div>


<script type="text/javascript">
function onSignUp(){
	var settings = {
	  "async": true,
	  "crossDomain": true,
	  "url": "http://localhost:3000/api/v1/signup",
	  "method": "POST",
	  "headers": {
	    "content-type": "application/x-www-form-urlencoded"
	  },
	  "data": {
	    "email": $("#email").val(),
	    "password": $("#password").val()
	  }
	}

	$.ajax(settings).done(function (response) {
		alert("registered");
	});
}

function onLogin(){
	var settings = {
	  "async": true,
	  "crossDomain": true,
	  "url": "http://localhost:3000/api/v1/login",
	  "method": "POST",
	  "headers": {
	    "content-type": "application/x-www-form-urlencoded"
	  },
	  "data": {
	    "email": $("#email").val(),
	    "password": $("#password").val()
	  }
	}

	$.ajax(settings).done(function (response) {
	  alert("logged in");
	  $("#token").val(response.token);
	});
}

function btnClick(){
	var settings = {
	  "async": true,
	  "crossDomain": true,
	  "url": "http://127.0.0.1:3001/dashboard",
	  "method": "GET",
	  "headers": {
	    "authorization": $("#token").val(),
		"Content-Type": "application/json"
	  }
	}

	$.ajax(settings).done(function (response) {
	  console.log(response);
	});
}

</script>
</body>
</html>